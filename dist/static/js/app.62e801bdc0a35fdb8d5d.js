webpackJsonp([1],{D6Dh:function(t,n){},NHnr:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r("xd7I"),a={render:function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"shop-list"},[r("h4",[t._v("商品信息")]),t._v(" "),r("table",{staticClass:"table table-bordered table-hover"},[t._m(0),t._v(" "),r("tbody",t._l(t.shopList,function(n){return r("tr",[r("td",[t._v(t._s(n.id))]),t._v(" "),r("td",[t._v(t._s(n.name))]),t._v(" "),r("td",[t._v(t._s(n.price))]),t._v(" "),r("td",[t._v(t._s(n.num||""))]),t._v(" "),r("td",[r("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(r){return t.add_db(n)}}},[t._v(t._s(n.num?"+":"添加到购物车"))]),t._v(" "),n.num&&n.num>0?r("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(r){return t.reduce_db(n)}}},[t._v("-")]):t._e()])])}),0)])])},staticRenderFns:[function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("thead",[r("tr",[r("th",[t._v("id")]),t._v(" "),r("th",[t._v("名称")]),t._v(" "),r("th",[t._v("价格")]),t._v(" "),r("th",[t._v("数量")]),t._v(" "),r("th",[t._v("操作")])])])}]};var c=function(t,n){var r=0,e=t.toString(),a=n.toString();try{r+=e.split(".")[1].length}catch(t){}try{r+=a.split(".")[1].length}catch(t){}return Number(e.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,r)},i={name:"CarList",data:function(){return{}},computed:{carList:function(){return this.$store.getters.getCarList}},methods:{action_car:function(t,n){this.$store.dispatch("update_curr_shop_status",{index:t}),this.$store.dispatch(n)},calcPrices:function(t,n){return c(t,n)}}},s={render:function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"car-list"},[r("h4",[t._v("购物车信息")]),t._v(" "),r("table",{staticClass:"table table-bordered table-hover"},[t._m(0),t._v(" "),r("tbody",t._l(t.carList,function(n,e){return r("tr",{key:e},[r("td",[t._v(t._s(n.id))]),t._v(" "),r("td",[t._v(t._s(n.name))]),t._v(" "),r("td",[t._v(t._s(n.price))]),t._v(" "),r("td",[t._v(t._s(n.num))]),t._v(" "),r("td",[t._v(t._s(t.calcPrices(n.num,n.price)))]),t._v(" "),r("td",[r("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(n){return t.action_car(e,"add_db")}}},[t._v("+")]),t._v(" "),r("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(n){return t.action_car(e,"reduce_db")}}},[t._v("-")]),t._v(" "),r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(n){return t.action_car(e,"delete_db")}}},[t._v("x")])])])}),0)])])},staticRenderFns:[function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("thead",[r("tr",[r("th",[t._v("id")]),t._v(" "),r("th",[t._v("名称")]),t._v(" "),r("th",[t._v("价格")]),t._v(" "),r("th",[t._v("数量")]),t._v(" "),r("th",[t._v("总价")]),t._v(" "),r("th",[t._v("操作")])])])}]};var o={render:function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"car-info"},[r("div",{staticClass:"item"},[t._v("商品总数："+t._s(t.getCarInfo.total_nums))]),t._v(" "),r("div",{staticClass:"item"},[t._v("商品总价："+t._s(t.getCarInfo.total_prices))]),t._v(" "),r("div",{staticClass:"item pull-right"},[r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.clear_local}},[t._v("清空购物车")])])])},staticRenderFns:[]};var u={name:"App",components:{ShopList:r("C7Lr")({name:"ShopList",data:function(){return{shopList:[]}},created:function(){this.shopList=this.$store.state.car.shopList},mounted:function(){for(var t=this.$store.state.car.carList,n=0;n<this.shopList.length;n++)for(var r=0;r<t.length;r++)if(t[r].id==this.shopList[n].id){this.$set(this.shopList,n,t[r]);break}},methods:{add_db:function(t){var n=t.id;this.$store.dispatch("check_db",{id:n}),-1!=this.$store.state.car.currIndex?this.$store.dispatch("add_db"):(this.$set(t,"num",1),this.$store.dispatch("create_db",{shop:t}))},reduce_db:function(t){var n=t.id;this.$store.dispatch("check_db",{id:n}),this.$store.dispatch("reduce_db")}}},a,!1,function(t){r("igd5")},"data-v-5b768e94",null).exports,CarList:r("C7Lr")(i,s,!1,function(t){r("wYlV")},"data-v-48a79063",null).exports,CarInfo:r("C7Lr")({name:"CarInfo",data:function(){return{}},computed:{getCarInfo:function(){return this.$store.getters.getCarInfo}},methods:{clear_local:function(){this.$store.dispatch("clear_local")}}},o,!1,function(t){r("usuo")},"data-v-2a733d64",null).exports}},_={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("h2",[this._v("Vuex购物车")]),this._v(" "),n("shop-list"),this._v(" "),n("car-list"),this._v(" "),n("car-info")],1)},staticRenderFns:[]};var d,l=r("C7Lr")(u,_,!1,function(t){r("D6Dh")},null,null).exports,v=r("R4Sj"),h={shopList:[{id:1,name:"鱼香茄子",price:12.5},{id:2,name:"辣子鸡丁",price:13.9},{id:3,name:"土豆红烧肉",price:15.8},{id:4,name:"五常香米",price:2.9}],carList:localStorage.getItem("carList")?JSON.parse(localStorage.getItem("carList")):[],carInfo:{total_nums:0,total_prices:0},currIndex:-1},f={getCarList:function(t){return t.carList},getCarInfo:function(t){t.carInfo.total_nums=0,t.carInfo.total_prices=0;var n=t.carList,r=[];if(n.length>0){for(var e=0;e<n.length;e++)t.carInfo.total_nums+=parseInt(n[e].num),r.push(c(n[e].num,n[e].price));t.carInfo.total_prices=r.reduce(function(t,n){return function(t,n){var r,e,a;try{r=t.toString().split(".")[1].length}catch(t){r=0}try{e=n.toString().split(".")[1].length}catch(t){e=0}return a=Math.pow(10,Math.max(r,e)),(c(t,a)+c(n,a))/a}(t,n)})}return t.carInfo}},p=r("a3Yh"),m=r.n(p),L=r("3cXf"),b=r.n(L),C={state:h,getters:f,mutations:(d={},m()(d,"CHECK_DB",function(t,n){var r=n.id;t.currIndex=-1;var e=t.carList;if(e.length)for(var a=0;a<e.length;a++)if(e[a].id==r){t.currIndex=a;break}}),m()(d,"CREATE_DB",function(t,n){t.carList.push(n)}),m()(d,"ADD_DB",function(t){t.carList[t.currIndex].num=parseInt(t.carList[t.currIndex].num),t.carList[t.currIndex].num++}),m()(d,"REDUCE_DB",function(t){t.carList[t.currIndex].num=parseInt(t.carList[t.currIndex].num),t.carList[t.currIndex].num--,0==t.carList[t.currIndex].num&&t.carList.splice(t.currIndex,1)}),m()(d,"CREATE_LOCAL",function(t){localStorage.setItem("carList",b()(t.carList))}),m()(d,"UPDATE_CURR_SHOP_STATUS",function(t,n){var r=n.index,e=void 0===r?-1:r;t.currIndex=e}),m()(d,"DELETE_DB",function(t){t.currIndex>=0&&(t.carList[t.currIndex].num=0,t.carList.splice(t.currIndex,1))}),m()(d,"CLEAR_LOCAL",function(t){t.carList.forEach(function(t){t.num=0}),t.carList=[],localStorage.removeItem("carList")}),d),actions:{check_db:function(t,n){(0,t.commit)("CHECK_DB",n)},create_db:function(t,n){var r=t.commit;r("CREATE_DB",n.shop),r("CREATE_LOCAL")},add_db:function(t){var n=t.commit;n("ADD_DB"),n("CREATE_LOCAL")},reduce_db:function(t){var n=t.commit;n("REDUCE_DB"),n("CREATE_LOCAL")},update_local:function(t){(0,t.commit)("CREATE_LOCAL")},update_curr_shop_status:function(t,n){(0,t.commit)("UPDATE_CURR_SHOP_STATUS",n)},delete_db:function(t){var n=t.commit;n("DELETE_DB"),n("CREATE_LOCAL")},clear_local:function(t){(0,t.commit)("CLEAR_LOCAL")}}};e.a.use(v.a);var E=new v.a.Store({modules:{car:C}});e.a.config.productionTip=!1,new e.a({el:"#app",store:E,components:{App:l},template:"<App/>"})},igd5:function(t,n){},usuo:function(t,n){},wYlV:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.62e801bdc0a35fdb8d5d.js.map